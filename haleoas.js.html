<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width" charset="utf-8">
    <title>haleoas</title>
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/cayman.min.css">
    <link rel="stylesheet" href="css/prism.min.css">
    <link rel="stylesheet" href="css/index.min.css">
    <link rel="stylesheet" href="css/docs.min.css">
    <link rel="stylesheet" href="css/bootstrap-responsive.min.css">
  </head>
  <body data-spy="scroll" data-target=".scrollspy">
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container"><a class="brand">Mr. Doc</a>
          <div class="nav-collapse collapse">
            <ul class="nav pull-right sponsored"></ul>
          </div>
        </div>
      </div>
    </div>
    <header id="overview" class="jumbotron subhead">
      <div class="container">
        <h1>haleoas</h1>
        <p class="lead"></p>
      </div>
    </header>
    <div class="container">
      <div class="row">
        <div class="span3 bs-docs-sidebar">
          <ul class="nav nav-list bs-docs-sidenav affix-top">
            <li><a href="index.html">Main</a></li>
            <li class="active"><a href="haleoas.js.html">haleoas.js</a></li>
          </ul>
          <div class="scrollspy">
            <ul class="nav nav-list bs-docs-sidenav affix-top">
              <li><a href="#haleoasFactory"><i class="alert alert-info"></i><span>haleoasFactory</span></a>
              </li>
              <li><a href="#expand"><i class="alert alert-info"></i><span>expand</span></a>
              </li>
              <li><a href="#bodyHandler"><i class="alert alert-success"></i><span>bodyHandler</span></a>
              </li>
              <li><a href="#clone"><i class="alert alert-success"></i><span>clone</span></a>
              </li>
              <li><a href="#toJSON"><i class="alert alert-info"></i><span>toJSON</span></a>
              </li>
              <li><a href="#parse"><i class="alert alert-info"></i><span>parse</span></a>
              </li>
              <li><a href="#expand"><i class="alert alert-success"></i><span>expand</span></a>
              </li>
              <li><a href="#links"><i class="alert alert-info"></i><span>links</span></a>
              </li>
              <li><a href="#allow"><i class="alert alert-info"></i><span>allow</span></a>
              </li>
              <li><a href="#follow"><i class="alert alert-info"></i><span>follow</span></a>
              </li>
              <li><a href="#post"><i class="alert alert-info"></i><span>post</span></a>
              </li>
              <li><a href="#put"><i class="alert alert-info"></i><span>put</span></a>
              </li>
              <li><a href="#get"><i class="alert alert-info"></i><span>get</span></a>
              </li>
              <li><a href="#delete"><i class="alert alert-info"></i><span>delete</span></a>
              </li>
              <li><a href="#patch"><i class="alert alert-info"></i><span>patch</span></a>
              </li>
              <li><a href="#options"><i class="alert alert-info"></i><span>options</span></a>
              </li>
              <li><a href="#head"><i class="alert alert-info"></i><span>head</span></a>
              </li>
            </ul>
          </div>
        </div>
        <div class="span9">
          <section id="haleoasFactory">
            <h1>haleoasFactory</h1>
            <h5 class="subheader"></h5>
            <p>
              <div class="label label-info radius ctx-type">function</div><span>&nbsp;</span><span>haleoasFactory()</span><span>&nbsp;</span>
            </p>
          </section>
          <table class="table table-bordered table-striped">
            <thead>
              <tr>
                <th style="width:20%">Option name</th>
                <th style="width:20%">Type</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>opts</td>
                <td>Object</td>
                <td></td>
              </tr>
              <tr>
                <td>[fetch]</td>
                <td>Function</td>
                <td><ul>
<li>the function to use for fetches via HTTP</li>
</ul>
</td>
              </tr>
              <tr>
                <td>return</td>
                <td>stamp</td>
                <td><p>haleoas stamp for creation of resources and traversal through an HAL api *</p></td>
              </tr>
            </tbody>
          </table>
          <div class="description"><p>A factory factory for global config and application handle.<br />for example, you likely want to use a <code>fetch</code> implementation through the<br />whole application, so you can pass in that as an option and it will<br />be used for all instances created by the resource stamps.</p></div>
          <pre><code class="language-javascript">export default function haleoasFactory(opts = {}) {
let {fetch:globalFetch, Promise:globalPromise} = opts</code></pre>
          <table class="table table-bordered table-striped">
            <thead>
              <tr>
                <th style="width:20%">Option name</th>
                <th style="width:20%">Type</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>fetch</td>
                <td>Function</td>
                <td><p>the xhr implementation for http. Prefer the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API">fetch api</a>.</p></td>
              </tr>
              <tr>
                <td>[self]</td>
                <td>Url</td>
                <td><p>the resource uri</p></td>
              </tr>
              <tr>
                <td>[body]</td>
                <td>Object</td>
                <td><p>a valid <code>HAL</code> representation to seed the resource with</p></td>
              </tr>
              <tr>
                <td>[Promise]</td>
                <td>Promise</td>
                <td><p>a Promise implementation conforming to <a href="https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Promise">this</a></p></td>
              </tr>
            </tbody>
          </table>
          <div class="description"><p>factory for a resource</p></div>
          <pre><code class="language-javascript">return stampit()
.static({</code></pre>
          <section id="expand">
            <h1>expand</h1>
            <h5 class="subheader"></h5>
            <p>
              <div class="label label-info radius ctx-type">method</div><span>&nbsp;</span><span>expand()</span><span>&nbsp;</span>
            </p>
          </section>
          <table class="table table-bordered table-striped">
            <thead>
              <tr>
                <th style="width:20%">Option name</th>
                <th style="width:20%">Type</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>link</td>
                <td>Url, Object</td>
                <td><p>or url with or without <a href="http://tools.ietf.org/html/rfc6570">http://tools.ietf.org/html/rfc6570</a></p></td>
              </tr>
              <tr>
                <td>params</td>
                <td>Object, Array</td>
                <td><p>object or array of objects to expand in the url</p></td>
              </tr>
              <tr>
                <td>return</td>
                <td>Array</td>
                <td><p>array of the expanded urls, one item per params object passed in</p></td>
              </tr>
            </tbody>
          </table>
          <div class="description"><p>Expand a url conforming to <a href="http://tools.ietf.org/html/rfc6570">http://tools.ietf.org/html/rfc6570</a>,<br />or with <code>templated:false</code> to indicate concat of query params.</p></div>
          <pre><code class="language-javascript">expand: function(link, params) {
    if(!params || Array.isArray(params) &amp;&amp; !params.length) {
        return [link.href || link]
    }
    //only arrays
    params = [].concat(params)
    if(link.href &amp;&amp; !link.templated) {
        // we arent doing templated uris, so try to parse+format
        let parsed = url.parse(link.href, true)
        ;(delete parsed.search)
        return params.map(q =&gt; {
            let opt = Object.assign({}, parsed.query, q)
            return url.format(Object.assign({}, parsed, { query: opt }))
        })
    }
    let exp = urlTemplate.parse(link.href || link)
    return params.map((q)=&gt; {
        return exp.expand(q ||{})
    })
}
})
.init(function({instance, stamp}){
let body,links,embedded, allow = []
let fetch = (this.fetch || globalFetch)
this.Promise = (this.Promise || globalPromise || Promise)
this.logerror = (this.logerror || this.log || console.error.bind(console))
this.log = (this.log || console.log.bind(console))


const MIME = 'application/hal+json'

const correctSelf = (ignore) =&gt; {
    let linkSelf = this.links('self')
    if(linkSelf &amp;&amp; linkSelf[0]) {
        this.self = linkSelf[0].href
    }
    return ignore
}
const parse = (json = {}) =&gt; {
    if(isString(json)) {
        try {
            json = JSON.parse(json)
        } catch(err) {
            this.logerror('Failed to parse', json)
        }
    }
    let copy = Object.assign({},json)
    ;({_links:links,_embedded:embedded} = copy)
    ;(delete copy._links)
    ;(delete copy._embedded)
    body = copy
    //merge body values onto `this`
    Object.assign(this,copy)
    return json
}
const headerHandler = (method) =&gt; {
    return (response) =&gt; {
        let allows = response.headers.get('allow')
        if(allows) {
            this.allow(allows.split(','))
        }
        return response
    }
}
const isBodyCandidate = (response) =&gt; {
    let status = response.status
    return (status &gt; 199 &amp;&amp; (status !== 204 &amp;&amp; status !== 304))
}</code></pre>
          <section id="bodyHandler">
            <h1>bodyHandler</h1>
            <h5 class="subheader"></h5>
            <p>
              <div class="label label-success radius ctx-type">declaration</div><span>&nbsp;</span><span>bodyHandler</span><span>&nbsp;</span>
            </p>
          </section>
          <div class="description"><p>eg <a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec4.html#sec4.4">http://www.w3.org/Protocols/rfc2616/rfc2616-sec4.html#sec4.4</a></p></div>
          <pre><code class="language-javascript">const bodyHandler = (method) =&gt; {
    return (response) =&gt; {
        if(!isBodyCandidate(response)) {
            return response
        }
        let contentType = response.headers.get('content-type')
        let contentLength = response.headers.get('content-length')
        // even though this is the spec https://tools.ietf.org/html/rfc7158#section-8.1,
        // some responses include encoding, so just check for the existence of the MIME
        if(contentType.indexOf(MIME) &lt; 0) {
            let errorMessage = `illegal content type at ${response.url} : ${contentType}`
            this.logerror(errorMessage)
            return response
        }
        //missing header returns `null`
        if(contentLength != null &amp;&amp; contentLength &lt; 1) {
            return response
        }
        try {
            //be a gentleman...dont keep downstreamers from using the response
            let cloned = response.clone();
            return cloned.json()
            .then(parse)
            .then(() =&gt; {
                return response
            })
            .catch(err =&gt; {
                this.logerror(err);
                return response
            });
        } catch(err) {
            this.logerror(err)
            return response
        }
    }
}

const respond = (method) =&gt; {
    return (response) =&gt; {
        return {
            resource: this
            , response
        }
    }
}

const sync = (self) =&gt; {
    return stamp({
        self
        , fetch
    }).get()
}

const stringifyReplacer = (key, value) =&gt; {
    if(key === '_links') {
        //do not include in serialization
        return undefined
    }
    return value
}

//api</code></pre>
          <section id="clone">
            <h1>clone</h1>
            <h5 class="subheader"></h5>
            <p>
              <div class="label label-success radius ctx-type">property</div><span>&nbsp;</span><span>this.clone</span><span>&nbsp;</span>
            </p>
          </section>
          <div class="description"><p>Clone this resource</p></div>
          <pre><code class="language-javascript">this.clone = () =&gt; stamp(instance)</code></pre>
          <section id="toJSON">
            <h1>toJSON</h1>
            <h5 class="subheader"></h5>
            <p>
              <div class="label label-info radius ctx-type">method</div><span>&nbsp;</span><span>this.toJSON()</span><span>&nbsp;</span>
            </p>
          </section>
          <div class="description"><p>serialize this resource to JSON.<br />Optionally include <code>{ _links: false }</code> or <code>{ _embedded: false }</code><br />to suppress the inclusion of these attributes in the result.<br />They both default to <code>true</code>.</p></div>
          <pre><code class="language-javascript">this.toJSON = function({_links,_embedded} = {}) {
    //properties (not methods) only
    let copy = Object.keys(this)
    .filter((key) =&gt; {
        return typeof this[key] !== 'function'
    })
    .reduce((obj,key)=&gt; {
        obj[key] = this[key]
        return obj
    }, {})

    //reconstruct
    let result = copy
    ;(delete result.self)
    if(typeof _links === 'undefined' || !!_links ) {
        result._links = Object.assign({},links)
    }
    if(typeof _embedded === 'undefined' || !!_embedded ) {
        result._embedded = Object.assign({},embedded)
    }
    return result
}</code></pre>
          <section id="parse">
            <h1>parse</h1>
            <h5 class="subheader"></h5>
            <p>
              <div class="label label-info radius ctx-type">method</div><span>&nbsp;</span><span>this.parse()</span><span>&nbsp;</span>
            </p>
          </section>
          <div class="description"><p>parse a JSON object to hydrate this instance</p></div>
          <pre><code class="language-javascript">this.parse = function(_body){
    parse(_body)
    return this
}</code></pre>
          <section id="expand">
            <h1>expand</h1>
            <h5 class="subheader"></h5>
            <p>
              <div class="label label-success radius ctx-type">property</div><span>&nbsp;</span><span>this.expand</span><span>&nbsp;</span>
            </p>
          </section>
          <div class="description"><p>see stamp root <code>expand</code> doc</p></div>
          <pre><code class="language-javascript">this.expand = stamp.expand</code></pre>
          <section id="links">
            <h1>links</h1>
            <h5 class="subheader"></h5>
            <p>
              <div class="label label-info radius ctx-type">method</div><span>&nbsp;</span><span>this.links()</span><span>&nbsp;</span>
            </p>
          </section>
          <table class="table table-bordered table-striped">
            <thead>
              <tr>
                <th style="width:20%">Option name</th>
                <th style="width:20%">Type</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>rel</td>
                <td>String</td>
                <td><p>retrieve the list of links by relationship</p></td>
              </tr>
              <tr>
                <td>return</td>
                <td>Array</td>
                <td><p>of matching relationships from <code>_links</code> collection An empty array is returned if the relationship doesn&#39;t exist.</p></td>
              </tr>
            </tbody>
          </table>
          <div class="description"></div>
          <pre><code class="language-javascript">this.links = function(rel) {
    let matches = (links || {})[rel]
    if(!matches) { return [] }
    let result = [].concat(matches)
    return result
}</code></pre>
          <section id="allow">
            <h1>allow</h1>
            <h5 class="subheader"></h5>
            <p>
              <div class="label label-info radius ctx-type">method</div><span>&nbsp;</span><span>this.allow()</span><span>&nbsp;</span>
            </p>
          </section>
          <table class="table table-bordered table-striped">
            <thead>
              <tr>
                <th style="width:20%">Option name</th>
                <th style="width:20%">Type</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>[methods]</td>
                <td>Array</td>
                <td><p>Array of valid method names</p></td>
              </tr>
              <tr>
                <td>return</td>
                <td>Array</td>
                <td><p>of HTTP methods retrieved by <code>ALLOW</code> response header</p></td>
              </tr>
            </tbody>
          </table>
          <div class="description"><p>what methods are ALLOWed?<br />getter/setter (Array) of HTTP methods</p></div>
          <pre><code class="language-javascript">this.allow = function(methods) {
    if(methods) { allow = methods }
    return allow
}</code></pre>
          <section id="follow">
            <h1>follow</h1>
            <h5 class="subheader"></h5>
            <p>
              <div class="label label-info radius ctx-type">method</div><span>&nbsp;</span><span>this.follow()</span><span>&nbsp;</span>
            </p>
          </section>
          <table class="table table-bordered table-striped">
            <thead>
              <tr>
                <th style="width:20%">Option name</th>
                <th style="width:20%">Type</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>rel</td>
                <td>String</td>
                <td><p>The relationship to traverse</p></td>
              </tr>
              <tr>
                <td>return</td>
                <td>Promise</td>
                <td><p>resolving an Array of {haleoas} instances for each link, but <em>have not</em> been synced with server.<br />*</p></td>
              </tr>
            </tbody>
          </table>
          <div class="description"><p>Follows the relation(s) at <code>rel</code></p></div>
          <pre><code class="language-javascript">this.follow = function(rel) {
    let lnks = this.links(rel)
    if(!lnks.length) {
        throw new Error(`${this.self} not related with '${rel}'`)
    }
    //allow non-global Promise
    let P = (this.Promise)
    let promises = lnks.map((lnk) =&gt; {
        return stamp({ self: lnk, fetch })
    })
    return P.all(promises)
}
const prepare = (cfg = {}) =&gt; {
    let { data, params } = cfg;
    let self = this.links('self')[0]
    let {href} = self
    if(params) {
        href  = this.expand(self,params)[0]
    }
    ;(delete cfg.data)
    ;(delete cfg.params)
    return {
        href,
        cfg,
        data,
        params
    }
}

//http api</code></pre>
          <section id="post">
            <h1>post</h1>
            <h5 class="subheader"></h5>
            <p>
              <div class="label label-info radius ctx-type">method</div><span>&nbsp;</span><span>this.post()</span><span>&nbsp;</span>
            </p>
          </section>
          <table class="table table-bordered table-striped">
            <thead>
              <tr>
                <th style="width:20%">Option name</th>
                <th style="width:20%">Type</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>data</td>
                <td>Object</td>
                <td><p>optional body content to send</p></td>
              </tr>
              <tr>
                <td>return</td>
                <td>Promise</td>
                <td><p>the {resource,response} object of either the new resource (when a <code>Location</code> header is present in response) or the current instance.<br />*</p></td>
              </tr>
            </tbody>
          </table>
          <div class="description"><p>Issues a <code>POST</code> request against this resource<br />Follows up with a <code>GET</code> right away if a <code>Location</code> header is present, as in<br />a <code>201 Created</code> response.</p></div>
          <pre><code class="language-javascript">this.post = function(cfg = {}) {
    let { data, params, href, cfg:sanitized } = prepare(cfg)
    const req = {
        method: 'POST'
        , headers: {
            'accept': MIME
            ,'content-type': 'application/json'
        }
        , body: JSON.stringify(data)
    }
    return fetch(href, Object.assign(req, sanitized))
    .then((response) =&gt; {
        let location = response.headers.get('location')
        if(location) {
            return sync(location)
        }
        //allow non-global Promise
        let P = (this.Promise)
        return P.resolve(response)
        .then(bodyHandler(req.method))
        .then(headerHandler(req.method))
        .then(respond(req.method))
    })
}</code></pre>
          <section id="put">
            <h1>put</h1>
            <h5 class="subheader"></h5>
            <p>
              <div class="label label-info radius ctx-type">method</div><span>&nbsp;</span><span>this.put()</span><span>&nbsp;</span>
            </p>
          </section>
          <div class="description"><p>Issues a <code>PUT</code> request against this resource<br />Follows up with a <code>GET</code> right away to resync this resource.</p></div>
          <pre><code class="language-javascript">this.put = function(cfg = {}) {
    let { data, params, href, cfg:sanitized }= prepare(cfg)
    let serialized = this.toJSON()
    //dont include _links
    ;(delete serialized._links)
    const req = {
        method: 'PUT'
        , headers: {
            'accept': MIME
            ,'content-type': 'application/json'
        }
        , body: JSON.stringify(serialized)
    }
    return fetch(href, Object.assign(req, sanitized))
    .then(headerHandler(req.method))
    .then(sync.bind(this,this.links('self')[0]))
}</code></pre>
          <section id="get">
            <h1>get</h1>
            <h5 class="subheader"></h5>
            <p>
              <div class="label label-info radius ctx-type">method</div><span>&nbsp;</span><span>this.get()</span><span>&nbsp;</span>
            </p>
          </section>
          <table class="table table-bordered table-striped">
            <thead>
              <tr>
                <th style="width:20%">Option name</th>
                <th style="width:20%">Type</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>[params]</td>
                <td>Object</td>
                <td><p>optionally provide params for <code>self</code> having a url templated in conformance to <a href="http://tools.ietf.org/html/rfc6570">RFC6570</a>.</p></td>
              </tr>
              <tr>
                <td>return</td>
                <td>Promise</td>
                <td><p>resolving an object having the <code>Response</code> and this instance (<code>resource</code>) , but hydrated with payload from response<br /><strong>Note</strong> that <code>content-type</code> other than <code>application/hal+json</code> will not throw an error<br />and this instance will remain untouched.</p></td>
              </tr>
            </tbody>
          </table>
          <div class="description"></div>
          <pre><code class="language-javascript">this.get = function(cfg = {}) {
    let { params, href, cfg:sanitized }= prepare(cfg)
    const req = {
        method: 'GET'
        , headers: {
            'accept': MIME
        }
        //https://groups.yahoo.com/neo/groups/rest-discuss/conversations/messages/9962
        , body: undefined
    }
    return fetch(href, Object.assign(req, sanitized))
    .then(bodyHandler(req.method))
    .then(headerHandler(req.method))
    .then(correctSelf)
    .then(respond(req.method))
}</code></pre>
          <section id="delete">
            <h1>delete</h1>
            <h5 class="subheader"></h5>
            <p>
              <div class="label label-info radius ctx-type">method</div><span>&nbsp;</span><span>this.delete()</span><span>&nbsp;</span>
            </p>
          </section>
          <div class="description"><p>Issues a <code>DELETE</code> request against this resource<br /><a href="http://tools.ietf.org/html/rfc2616#section-9.7">http://tools.ietf.org/html/rfc2616#section-9.7</a></p></div>
          <pre><code class="language-javascript">this.delete = function(cfg = {}) {
    let { data, params, href, cfg:sanitized }= prepare(cfg)
    const req = {
        method: 'DELETE'
        , headers: {
            'accept': MIME
        }
    }
    return fetch(href, Object.assign(req, sanitized))
    .then(headerHandler(req.method))
    //@TODO handle 200
    //by parsing to a HAL status entity
    //and return that?
    .then(respond(req.method))
}</code></pre>
          <section id="patch">
            <h1>patch</h1>
            <h5 class="subheader"></h5>
            <p>
              <div class="label label-info radius ctx-type">method</div><span>&nbsp;</span><span>this.patch()</span><span>&nbsp;</span>
            </p>
          </section>
          <table class="table table-bordered table-striped">
            <thead>
              <tr>
                <th style="width:20%">Option name</th>
                <th style="width:20%">Type</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>[data]</td>
                <td>Object</td>
                <td><p>optionally pass the patch data to use for diff When this argument is included, it will diff the current state of the<br />resource against that patch shape.<br />Otherwise, it will diff against the <em>original</em> body and the current state<br />of the resource.<br />It will immediately issue an <code>GET</code> request to resync from the server.</p></td>
              </tr>
              <tr>
                <td>return</td>
                <td>Promise</td>
                <td><p>resolving to a {request,response} object for a new instance of this resource</p></td>
              </tr>
            </tbody>
          </table>
          <div class="description"><p>Issues a <code>PATCH</code> request against this resource<br /><a href="http://tools.ietf.org/html/rfc6902">http://tools.ietf.org/html/rfc6902</a></p></div>
          <pre><code class="language-javascript">this.patch  = function(cfg = {}) {
    let { data, params, href, cfg:sanitized }= prepare(cfg)
    let serialized = this.toJSON({ _links: false, _embedded: false})
    let dest = (data || serialized)
    let src = (data ? serialized : body)
    let patch = diff( src, dest )

    let req = {
        method: 'PATCH'
        , headers: {
            'accept': MIME
            ,'content-type': 'application/json-patch+json'
        }
        , body: JSON.stringify(patch)
    }
    return fetch(href, Object.assign(req, sanitized))
    .then(headerHandler(req.method))
    .then(sync.bind(this,this.links('self')[0]))
}</code></pre>
          <section id="options">
            <h1>options</h1>
            <h5 class="subheader"></h5>
            <p>
              <div class="label label-info radius ctx-type">method</div><span>&nbsp;</span><span>this.options()</span><span>&nbsp;</span>
            </p>
          </section>
          <div class="description"><p>Issues a <code>OPTIONS</code> request against this resource</p></div>
          <pre><code class="language-javascript">this.options = function(cfg = {}) {
    let { params, href, cfg: sanitized }= prepare(cfg)
    let req = {
        method: 'OPTIONS'
        , headers: {}
        , body: undefined
    }
    return fetch(href, Object.assign(req, sanitized))
    .then(headerHandler(req.method))
    .then(respond(req.method))
}</code></pre>
          <section id="head">
            <h1>head</h1>
            <h5 class="subheader"></h5>
            <p>
              <div class="label label-info radius ctx-type">method</div><span>&nbsp;</span><span>this.head()</span><span>&nbsp;</span>
            </p>
          </section>
          <div class="description"><p>Issues a <code>HEAD</code> request against this resource</p></div>
          <pre><code class="language-javascript">this.head = function(cfg = {}) {
    let { data, params, href, cfg:sanitized }= prepare(cfg)
    let req = {
        method: 'HEAD'
        , headers: { }
        , body: undefined
    }
    return fetch(href, Object.assign(req, sanitized))
    .then(headerHandler(req.method))
    .then(respond(req.method))
}

//preload
if(this.body) {
    let copy = this.body
    ;(delete this.body)
    parse(copy)
    correctSelf()
} else if(this.self) {
    if(this.self.href) {
        links = { self: Object.assign({}, this.self) }
    } else {
        links = { self: { href: this.self, templated: false }}
    }
    correctSelf()
}

})
}</code></pre>
        </div>
      </div>
    </div>
    <footer class="footer">
      <div class="container">
        <p>Documentation generated with <a href="https://github.com/mr-doc/mr-doc">Mr. Doc </a> created by <a href="https://twitter.com/FGRibreau" data-show-count="false" class="twitter-follow-button">Francois-Guillaume Ribreau </a></p>
        <p>Mr. Doc is sponsored by <a href="http://bringr.net/?btt" title="Outil d'analyse des rÃ©seaux sociaux" class="bringr">Bringr </a> and <a href="https://redsmin.com/?btt" title="Full Redis GUI" class="redsmin">Redsmin</a></p>
        <p>Theme borrowed from Twitter Bootstrap</p>
      </div>
    </footer>
    <script src="js/twitter-widget.min.js"></script>
    <script src="js/jquery.min.js"></script>
    <script src="js/bootstrap-transition.min.js"></script>
    <script src="js/bootstrap-scrollspy.min.js"></script>
    <script src="js/bootstrap-dropdown.min.js"></script>
    <script src="js/bootstrap-collapse.min.js"></script>
    <script src="js/bootstrap-affix.min.js"></script>
    <script src="js/prism.min.js"></script>
    <script src="js/index.min.js"></script>
  </body>
</html>